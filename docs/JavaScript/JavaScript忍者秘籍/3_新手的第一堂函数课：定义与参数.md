# 第3章 新手的第一堂函数课：定义与参数

## 3.1 函数式的不同点到底是什么

函数及函数式概念之所以如此重要，其原因之一在于**函数是程序执行过程中的主要模块单元**。除了全局JavaScript代码是在页面构建的阶段执行的，我们编写的所有的脚本代码都将在一个函数内执行。

由于我们的**大多数代码会作为函数调用来执行**，因此，我们在编写代码时，通用强大的**构造器**能赋予代码很大的灵活性和控制力。本书的大部分内容解释了如何利用函数作为第一类对象的特性获益。首先浏览一下对象中我们能使用的功能。

JavaScript中对象有以下几种常用功能。

- 对象可通过字面量来创建

  ```javascript
  {}
  ```

  

- 对象可以赋值给变量、数组项，或其他对象的属性

  ```javascript
  var ninja = {}; // 为变量赋值一个新对象
  ninjaArray.push({}); // 向数组中增加一个新对象
  ninja.data = {}; // 给某个对象的属性赋值为一个新对象
  ```

  

- 对象可以作为参数传递给函数

  ```javascript
  function hide(ninja) {
    ninja.visibility = false;
  }
  hide({}); // 一个新创建的对象作为参数传递给函数
  ```

  

- 对象可以作为函数的返回值

  ```javascript
  function returnNewNinja() {
    return {}; // 从函数中返回了一个新对象
  }
  ```

  

- 对象能够具有动态创建和分配的属性

  ```javascript
  var ninja = {};
  ninja.name = "Hanzo"; // 为对象分配一个新属性
  ```

  

### 3.1.1 函数是第一类对象

**JavaScript中函数拥有对象的所有能力**，也因此函数可被作为任意其他类型对象来对待。当我们说函数是第一类对象的时候，就是说函数也能够实现以下功能：

- 通过字面量创建

  ```javascript
  function ninjaFunction() {}
  ```

  

- 赋值给变量，数组项或其他对象的属性

  ```javascript
  var ninjaFunction = function() {}; // 为变量赋值一个新函数
  ninjaArray.push(function() {}); // 向数组中增加一个新函数
  ninja.data = function() {}; // 给某个对象的属性赋值为一个新函数
  ```

  

- 作为函数的参数来传递

  ```javascript
  function call(ninjaFunction) {
    ninjaFunction();
  }
  call(function() {}); // 一个新函数作为参数传递给函数
  ```

  

- 作为函数的返回值

  ```javascript
  function returnNewNinjaFunction() {
    return function() {}
  } // 返回一个新函数
  ```

  

- 具有动态创建和分配的属性

  ```javascript
  var ninjaFunction = function() {};
  ninjaFunction.ninja = "Hanzo"; // 为函数增加一个新属性
  ```

  

对象能做的任何一件事，函数也都能做。

?> 把函数作为第一类对象是**函数式编程（functional programming）**的第一步。函数式编程是一种编程风格，它通过书写函数式（而不是指定一些列执行步骤，就像那种更主流的命令式编程）代码来解决问题。函数式编程让代码更容易测试、扩展及模块化。

第一类对象的特点之一是，它能够**作为参数传入函数**。对于函数而言，这项特性也表明：

> **如果我们将某个函数作为参数传入另一个函数，传入函数会在应用程序执行的未来某个时间点才执行。**

大家所知道的更一般的概念是**回调函数（callback function）**。

### 3.1.2 回调函数

每当我们建立了一个将在随后调用的函数时，无论是在事件处理阶段通过浏览器还是通过其他代码，我们都是在建立一个回调（callback）。这个术语源自于这样一个事实，即在执行过程中，我们建立的函数会被其他函数在稍后的某个合适时间点”再回来调用“。

## 3.3 函数定义

函数创建的方式很大程度地影响了函数可被调用的时间、函数的行为以及函数可以在哪个对象上被调用。

### 3.3.1 函数声明和函数表达式

#### 函数声明

#### 函数表达式

正如我们多次所提到的，JavaScript中的函数是第一类对象，除此以外也就意味着他们可以通过字面量创建